<ul class="renditions">
    <?php foreach ($this->renditions as $rendition) { ?>
    <li>
        <?php echo $this->rendition($rendition, 150, 150, isset($this->articleRenditions[$rendition->getName()]) ? $this->articleRenditions[$rendition->getName()]->getImage() : null); ?>
        <h3 class="rendition-name"><?php echo $this->escape($rendition->getName()); ?> <small>(<?php echo $rendition->getWidth(), 'x', $rendition->getHeight(); ?>)</small></h3></li>
    </li>
    <?php } ?>
</ul>

<pre style="clear: both; font-size: 1.3em">&uarr; Renditions &darr; Images</pre>

<ul class="thumbnails">
    <?php foreach ($this->images as $image) { ?>
    <li id="image-<?php echo $image->getImageId(); ?>"><?php $thumbnail = $this->thumbnail('images/' . $image->getImageFileName(), 150, 150, 'fit'); ?>
        <img src="<?php echo $this->url(array(
            'src' => $thumbnail->src,
        ), 'image', true, false); ?>" width="<?php echo $thumbnail->width; ?>" height="<?php echo $thumbnail->height; ?>" alt="" />
    </li>
    <?php } ?>
</ul>

<script>
$(function() {
    $('.renditions li').droppable({
        hoverClass: 'ui-state-active',
        drop: function(event, ui) {
            var li = $(this);
            $.post("<?php echo $this->url(array(
                'module' => 'admin',
                'controller' => 'image',
                'action' => 'set-rendition',
            )); ?>", {
                'image': ui.draggable.attr('id'),
                'rendition': li.find('.rendition-name').text()
            }, function (data, textStatus) {
                li.find('.preview').html($(data).html());
            });
        }
    });

    $('.thumbnails li').draggable({
        revert: true,
        zIndex: 1000
    });
});
</script>
